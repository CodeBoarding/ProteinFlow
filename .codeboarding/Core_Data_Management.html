<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeBoarding Analysis - django</title>
    <!-- Load dagre first, then cytoscape, then cytoscape-dagre -->
    <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/cytoscape-dagre@2.4.0/cytoscape-dagre.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .component {
            border-left: 3px solid #6c757d;
            padding-left: 15px;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .component h3 {
            color: #495057;
            margin-top: 0;
        }
        
        code {
            background-color: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        #cy {
            width: 100%;
            height: 600px;
            border: 1px solid #dee2e6;
            margin: 20px 0;
            border-radius: 8px;
            background-color: #ffffff;
        }
        
        .badges {
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            margin-right: 10px;
        }
        
        .badge img {
            vertical-align: middle;
        }
        
        .references {
            list-style: none;
            padding-left: 0;
            margin: 10px 0;
        }
        
        .references li {
            margin: 4px 0;
        }
        
        .diagram-controls {
            margin: 10px 0;
            text-align: center;
        }
        
        .diagram-controls button {
            margin: 0 5px;
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .diagram-controls button:hover {
            background: #495057;
        }
    </style>
</head>
<body>
    <h1>CodeBoarding Analysis - django</h1>
    
    <div class="badges">
        <a href="https://github.com/CodeBoarding/GeneratedOnBoardings" class="badge">
            <img src="https://img.shields.io/badge/Generated%20by-CodeBoarding-9cf?style=flat-square" alt="Generated by CodeBoarding">
        </a>
        <a href="https://www.codeboarding.org/demo" class="badge">
            <img src="https://img.shields.io/badge/Try%20our-Demo-blue?style=flat-square" alt="Try our Demo">
        </a>
        <a href="mailto:contact@codeboarding.org" class="badge">
            <img src="https://img.shields.io/badge/Contact%20us%20-%20contact@codeboarding.org-lightgrey?style=flat-square" alt="Contact us">
        </a>
    </div>
    
    <div class="diagram-controls">
        <button onclick="resetLayout()">Reset Layout</button>
        <button onclick="fitToView()">Fit to View</button>
        <button onclick="exportImage()">Export PNG</button>
    </div>
    
    <div id="cy"></div>
    
    <h2>Details</h2>
    <p>The `Core Data Management` component is fundamental to `proteinflow` as it establishes the initial pipeline for acquiring, structuring, and preparing raw protein data. It ensures that all subsequent operations, such as feature extraction and model training, have access to high-quality, standardized input. Without these foundational steps, the project would lack the necessary data integrity and accessibility to function effectively.</p>
    
    
        <div class="component">
            <h3 id="proteinflow_download">proteinflow.download</h3>
            <p>This component is responsible for fetching raw protein data (PDB and SAbDab files) from external databases and managing their local storage. It acts as the primary entry point for data acquisition.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.download` (1:1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="proteinflow_data_PDBEntry">proteinflow.data.PDBEntry</h3>
            <p>This class serves as the foundational data structure for parsing and representing information from standard PDB or mmCIF files. It extracts atomic coordinates, sequences, and basic structural properties, including initial ligand information.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.data.PDBEntry` (1:1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="proteinflow_data_SAbDabEntry">proteinflow.data.SAbDabEntry</h3>
            <p>Extending `PDBEntry`, this specialized class handles antibody structures from the SAbDab database. It incorporates specific logic for identifying Complementarity Determining Regions (CDRs) and managing antibody chain types, building upon the base PDB structure.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.data.SAbDabEntry` (1:1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="proteinflow_data_ProteinEntry">proteinflow.data.ProteinEntry</h3>
            <p>This is the central, standardized data model that aggregates and processes information from `PDBEntry` and `SAbDabEntry`. It represents the cleaned, filtered, and unified protein data, ready for feature extraction and downstream analysis.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.data.ProteinEntry` (1:1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="proteinflow_ligand">proteinflow.ligand</h3>
            <p>This module is dedicated to the identification, parsing, and detailed processing of ligand molecules associated with protein structures. It handles tasks such as extracting ligand data from PDB files and managing their chemical properties.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.ligand` (1:1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="proteinflow_processing">proteinflow.processing</h3>
            <p>This component orchestrates the overall data processing pipeline. It manages the filtering, cleaning, and conversion of raw protein entries into standardized `ProteinEntry` objects, ensuring data quality and preparing it for further use.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.processing` (1:1)</code></li></ul>
        </div>
        
    
    <h3><a href="https://github.com/CodeBoarding/GeneratedOnBoardings/tree/main?tab=readme-ov-file#faq">FAQ</a></h3>
    
    <script>
        // Wait for all scripts to load before initializing
        document.addEventListener('DOMContentLoaded', function() {
            // Check if all required libraries are loaded
            if (typeof cytoscape === 'undefined') {
                console.error('Cytoscape is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            if (typeof dagre === 'undefined') {
                console.error('Dagre is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            if (typeof cytoscapeDagre === 'undefined') {
                console.error('Cytoscape-dagre extension is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            // Register the dagre extension
            try {
                cytoscape.use(cytoscapeDagre);
                console.log('Dagre extension registered successfully');
            } catch (e) {
                console.error('Failed to register dagre extension:', e);
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            const cytoscapeData = {
  "elements": [
    {
      "data": {
        "id": "proteinflow_download",
        "label": "proteinflow.download",
        "description": "This component is responsible for fetching raw protein data (PDB and SAbDab files) from external databases and managing their local storage. It acts as the primary entry point for data acquisition.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "proteinflow_data_PDBEntry",
        "label": "proteinflow.data.PDBEntry",
        "description": "This class serves as the foundational data structure for parsing and representing information from standard PDB or mmCIF files. It extracts atomic coordinates, sequences, and basic structural properties, including initial ligand information.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "proteinflow_data_SAbDabEntry",
        "label": "proteinflow.data.SAbDabEntry",
        "description": "Extending `PDBEntry`, this specialized class handles antibody structures from the SAbDab database. It incorporates specific logic for identifying Complementarity Determining Regions (CDRs) and managing antibody chain types, building upon the base PDB structure.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "proteinflow_data_ProteinEntry",
        "label": "proteinflow.data.ProteinEntry",
        "description": "This is the central, standardized data model that aggregates and processes information from `PDBEntry` and `SAbDabEntry`. It represents the cleaned, filtered, and unified protein data, ready for feature extraction and downstream analysis.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "proteinflow_ligand",
        "label": "proteinflow.ligand",
        "description": "This module is dedicated to the identification, parsing, and detailed processing of ligand molecules associated with protein structures. It handles tasks such as extracting ligand data from PDB files and managing their chemical properties.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "proteinflow_processing",
        "label": "proteinflow.processing",
        "description": "This component orchestrates the overall data processing pipeline. It manages the filtering, cleaning, and conversion of raw protein entries into standardized `ProteinEntry` objects, ensuring data quality and preparing it for further use.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "edge_0",
        "source": "proteinflow_download",
        "target": "proteinflow_processing",
        "label": "provides raw files and initiates acquisition"
      }
    },
    {
      "data": {
        "id": "edge_1",
        "source": "proteinflow_processing",
        "target": "proteinflow_data_PDBEntry",
        "label": "creates and processes"
      }
    },
    {
      "data": {
        "id": "edge_2",
        "source": "proteinflow_processing",
        "target": "proteinflow_data_SAbDabEntry",
        "label": "creates and processes"
      }
    },
    {
      "data": {
        "id": "edge_3",
        "source": "proteinflow_data_PDBEntry",
        "target": "proteinflow_ligand",
        "label": "utilizes for ligand extraction"
      }
    },
    {
      "data": {
        "id": "edge_4",
        "source": "proteinflow_ligand",
        "target": "proteinflow_data_PDBEntry",
        "label": "processes ligand data for"
      }
    },
    {
      "data": {
        "id": "edge_5",
        "source": "proteinflow_data_SAbDabEntry",
        "target": "proteinflow_data_PDBEntry",
        "label": "inherits from"
      }
    },
    {
      "data": {
        "id": "edge_6",
        "source": "proteinflow_data_PDBEntry",
        "target": "proteinflow_data_ProteinEntry",
        "label": "provides raw data for"
      }
    },
    {
      "data": {
        "id": "edge_7",
        "source": "proteinflow_data_SAbDabEntry",
        "target": "proteinflow_data_ProteinEntry",
        "label": "provides raw data for"
      }
    },
    {
      "data": {
        "id": "edge_8",
        "source": "proteinflow_processing",
        "target": "proteinflow_data_ProteinEntry",
        "label": "transforms into standardized objects"
      }
    }
  ]
};
            
            try {
                const cy = cytoscape({
                    container: document.getElementById('cy'),
                    
                    elements: cytoscapeData.elements,
                    
                    style: [
                        {
                            selector: 'node',
                            style: {
                                'background-color': '#f8f9fa',
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'color': '#495057',
                                'text-wrap': 'wrap',
                                'font-size': '11px',
                                'font-weight': '500',
                                'width': 'label',
                                'height': 'label',
                                'padding': '15px',
                                'shape': 'roundrectangle',
                                'border-width': 2,
                                'border-color': '#dee2e6'
                            }
                        },
                        {
                            selector: 'node[hasLink = true]',
                            style: {
                                'background-color': '#e9ecef',
                                'border-color': '#6c757d',
                                'cursor': 'pointer',
                                'border-width': 3
                            }
                        },
                        {
                            selector: 'node:hover',
                            style: {
                                'background-color': '#dee2e6',
                                'border-color': '#495057',
                                'border-width': 3
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#adb5bd',
                                'target-arrow-color': '#adb5bd',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': '10px',
                                'color': '#6c757d',
                                'text-rotation': 'autorotate',
                                'text-margin-y': -10,
                                'text-background-color': '#ffffff',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '2px',
                                'text-background-shape': 'roundrectangle'
                            }
                        }
                    ],
                    
                    layout: {
                        name: 'dagre',
                        directed: true,
                        padding: 30,
                        rankDir: 'LR',
                        nodeSep: 80,
                        edgeSep: 20,
                        rankSep: 150
                    }
                });
                
                // Apply dagre layout after cytoscape is initialized
                cy.layout({
                    name: 'dagre',
                    directed: true,
                    padding: 30,
                    rankDir: 'LR',
                    nodeSep: 80,
                    edgeSep: 20,
                    rankSep: 150
                }).run();
                
                // Add click handler for nodes with links
                cy.on('tap', 'node[hasLink = true]', function(evt) {
                    const node = evt.target;
                    const linkUrl = node.data('linkUrl');
                    if (linkUrl) {
                        window.open(linkUrl, '_blank');
                    }
                });
                
                // Add simple tooltip on hover
                cy.on('mouseover', 'node', function(evt) {
                    const node = evt.target;
                    const description = node.data('description');
                    if (description) {
                        // Simple tooltip implementation
                        const tooltip = document.createElement('div');
                        tooltip.innerHTML = description;
                        tooltip.style.cssText = `
                            position: fixed;
                            background: #333;
                            color: white;
                            padding: 8px;
                            border-radius: 4px;
                            font-size: 12px;
                            max-width: 300px;
                            z-index: 1000;
                            pointer-events: none;
                        `;
                        document.body.appendChild(tooltip);
                        
                        const updateTooltip = (e) => {
                            tooltip.style.left = (e.clientX + 10) + 'px';
                            tooltip.style.top = (e.clientY + 10) + 'px';
                        };
                        
                        document.addEventListener('mousemove', updateTooltip);
                        
                        node.on('mouseout', () => {
                            document.removeEventListener('mousemove', updateTooltip);
                            if (tooltip.parentNode) {
                                tooltip.parentNode.removeChild(tooltip);
                            }
                        });
                    }
                });
                
                // Make control functions globally available
                window.resetLayout = function() {
                    cy.layout({
                        name: 'dagre',
                        directed: true,
                        padding: 30,
                        rankDir: 'LR',
                        nodeSep: 80,
                        edgeSep: 20,
                        rankSep: 150
                    }).run();
                };
                
                window.fitToView = function() {
                    cy.fit();
                };
                
                window.exportImage = function() {
                    const png64 = cy.png({ scale: 2, full: true });
                    const link = document.createElement('a');
                    link.download = 'diagram.png';
                    link.href = png64;
                    link.click();
                };
                
            } catch (error) {
                console.error('Error initializing Cytoscape:', error);
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
            }
        });
    </script>
</body>
</html>