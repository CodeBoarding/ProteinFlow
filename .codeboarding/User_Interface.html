<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeBoarding Analysis - ProteinFlow</title>
    <!-- Load dagre first, then cytoscape, then cytoscape-dagre -->
    <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/cytoscape-dagre@2.4.0/cytoscape-dagre.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .component {
            border-left: 3px solid #6c757d;
            padding-left: 15px;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .component h3 {
            color: #495057;
            margin-top: 0;
        }
        
        code {
            background-color: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        #cy {
            width: 100%;
            height: 600px;
            border: 1px solid #dee2e6;
            margin: 20px 0;
            border-radius: 8px;
            background-color: #ffffff;
        }
        
        .badges {
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            margin-right: 10px;
        }
        
        .badge img {
            vertical-align: middle;
        }
        
        .references {
            list-style: none;
            padding-left: 0;
            margin: 10px 0;
        }
        
        .references li {
            margin: 4px 0;
        }
        
        .diagram-controls {
            margin: 10px 0;
            text-align: center;
        }
        
        .diagram-controls button {
            margin: 0 5px;
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .diagram-controls button:hover {
            background: #495057;
        }
    </style>
</head>
<body>
    <h1>CodeBoarding Analysis - ProteinFlow</h1>
    
    <div class="badges">
        <a href="https://github.com/CodeBoarding/GeneratedOnBoardings" class="badge">
            <img src="https://img.shields.io/badge/Generated%20by-CodeBoarding-9cf?style=flat-square" alt="Generated by CodeBoarding">
        </a>
        <a href="https://www.codeboarding.org/demo" class="badge">
            <img src="https://img.shields.io/badge/Try%20our-Demo-blue?style=flat-square" alt="Try our Demo">
        </a>
        <a href="mailto:contact@codeboarding.org" class="badge">
            <img src="https://img.shields.io/badge/Contact%20us%20-%20contact@codeboarding.org-lightgrey?style=flat-square" alt="Contact us">
        </a>
    </div>
    
    <div class="diagram-controls">
        <button onclick="resetLayout()">Reset Layout</button>
        <button onclick="fitToView()">Fit to View</button>
        <button onclick="exportImage()">Export PNG</button>
    </div>
    
    <div id="cy"></div>
    
    <h2>Details</h2>
    <p>The `CLI (User Interface)` component serves as the primary command-line interface for users to interact with the ProteinFlow library. It acts as the central orchestrator, interpreting user commands and initiating various core operations such as data downloading, processing, generation, splitting, and retrieving summaries. It also enables users to trigger evaluation and visualization tasks, making it the gateway for all user-driven functionalities within ProteinFlow.</p>
    
    
        <div class="component">
            <h3 id="CLI_User_Interface_">CLI (User Interface)</h3>
            <p>The main command-line interface that parses user input and dispatches commands to the appropriate backend functionalities. It provides the user-facing entry point for all ProteinFlow operations.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><a href="https://github.com/CodeBoarding/ProteinFlow/blob/main/proteinflow/cli.py#L18-L20" target="_blank" rel="noopener noreferrer"><code>`proteinflow.cli.cli` (18:20)</code></a></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Data_Download_Manager">Data Download Manager</h3>
            <p>Manages the process of fetching raw protein data from external sources, ensuring the initial dataset is acquired and made available for further processing.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.download_data` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Data_Generation_Engine">Data Generation Engine</h3>
            <p>Responsible for processing raw data into structured datasets suitable for analysis or model training, often involving complex transformations and feature engineering.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.generate_data` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Dataset_Splitter">Dataset Splitter</h3>
            <p>Handles the partitioning of datasets into subsets (e.g., train, validation, test) crucial for machine learning workflows, ensuring proper data segregation for model development and evaluation.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.split_data` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Dataset_Unsplitter">Dataset Unsplitter</h3>
            <p>Reconstructs a complete dataset from its previously split components, providing flexibility in data management and allowing for operations on the full dataset.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.unsplit_data` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Download_Tag_Validator">Download Tag Validator</h3>
            <p>Verifies the integrity and correctness of tags associated with downloaded data, ensuring data quality and consistency across the dataset.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.check_download_tags` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="PDB_Snapshot_Validator">PDB Snapshot Validator</h3>
            <p>Checks the status and integrity of Protein Data Bank (PDB) database snapshots, which are critical for data currency and reliability in protein structure analysis.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.check_pdb_snapshots` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="Error_Reporting_System">Error Reporting System</h3>
            <p>Aggregates and summarizes error logs, providing insights into system operational issues and aiding in debugging and troubleshooting.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.logging.get_error_summary` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="PDB_Data_Model">PDB Data Model</h3>
            <p>Represents the fundamental data structure for Protein Data Bank (PDB) entries, defining how protein structural data is organized and accessed within the library.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.data.PDBEntry` (-1:-1)</code></li></ul>
        </div>
        
        <div class="component">
            <h3 id="SAbDab_Data_Model">SAbDab Data Model</h3>
            <p>Represents the data structure for SAbDab (Structural Antibody Database) entries, inheriting specialized attributes and functionalities from the PDB Data Model to handle antibody-specific data.</p>
            <h4>Related Classes/Methods:</h4><ul class="references"><li><code>`proteinflow.data.SAbDabEntry` (-1:-1)</code></li></ul>
        </div>
        
    
    <h3><a href="https://github.com/CodeBoarding/GeneratedOnBoardings/tree/main?tab=readme-ov-file#faq">FAQ</a></h3>
    
    <script>
        // Wait for all scripts to load before initializing
        document.addEventListener('DOMContentLoaded', function() {
            // Check if all required libraries are loaded
            if (typeof cytoscape === 'undefined') {
                console.error('Cytoscape is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            if (typeof dagre === 'undefined') {
                console.error('Dagre is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            if (typeof cytoscapeDagre === 'undefined') {
                console.error('Cytoscape-dagre extension is not loaded');
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            // Register the dagre extension
            try {
                cytoscape.use(cytoscapeDagre);
                console.log('Dagre extension registered successfully');
            } catch (e) {
                console.error('Failed to register dagre extension:', e);
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
                return;
            }
            
            const cytoscapeData = {
  "elements": [
    {
      "data": {
        "id": "CLI_User_Interface_",
        "label": "CLI (User Interface)",
        "description": "The main command-line interface that parses user input and dispatches commands to the appropriate backend functionalities. It provides the user-facing entry point for all ProteinFlow operations.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Data_Download_Manager",
        "label": "Data Download Manager",
        "description": "Manages the process of fetching raw protein data from external sources, ensuring the initial dataset is acquired and made available for further processing.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Data_Generation_Engine",
        "label": "Data Generation Engine",
        "description": "Responsible for processing raw data into structured datasets suitable for analysis or model training, often involving complex transformations and feature engineering.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Dataset_Splitter",
        "label": "Dataset Splitter",
        "description": "Handles the partitioning of datasets into subsets (e.g., train, validation, test) crucial for machine learning workflows, ensuring proper data segregation for model development and evaluation.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Dataset_Unsplitter",
        "label": "Dataset Unsplitter",
        "description": "Reconstructs a complete dataset from its previously split components, providing flexibility in data management and allowing for operations on the full dataset.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Download_Tag_Validator",
        "label": "Download Tag Validator",
        "description": "Verifies the integrity and correctness of tags associated with downloaded data, ensuring data quality and consistency across the dataset.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "PDB_Snapshot_Validator",
        "label": "PDB Snapshot Validator",
        "description": "Checks the status and integrity of Protein Data Bank (PDB) database snapshots, which are critical for data currency and reliability in protein structure analysis.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "Error_Reporting_System",
        "label": "Error Reporting System",
        "description": "Aggregates and summarizes error logs, providing insights into system operational issues and aiding in debugging and troubleshooting.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "PDB_Data_Model",
        "label": "PDB Data Model",
        "description": "Represents the fundamental data structure for Protein Data Bank (PDB) entries, defining how protein structural data is organized and accessed within the library.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "SAbDab_Data_Model",
        "label": "SAbDab Data Model",
        "description": "Represents the data structure for SAbDab (Structural Antibody Database) entries, inheriting specialized attributes and functionalities from the PDB Data Model to handle antibody-specific data.",
        "hasLink": false
      }
    },
    {
      "data": {
        "id": "edge_0",
        "source": "CLI_User_Interface_",
        "target": "Data_Download_Manager",
        "label": "initiates"
      }
    },
    {
      "data": {
        "id": "edge_1",
        "source": "CLI_User_Interface_",
        "target": "Data_Generation_Engine",
        "label": "triggers"
      }
    },
    {
      "data": {
        "id": "edge_2",
        "source": "CLI_User_Interface_",
        "target": "Dataset_Splitter",
        "label": "commands"
      }
    },
    {
      "data": {
        "id": "edge_3",
        "source": "CLI_User_Interface_",
        "target": "Dataset_Unsplitter",
        "label": "instructs"
      }
    },
    {
      "data": {
        "id": "edge_4",
        "source": "CLI_User_Interface_",
        "target": "Download_Tag_Validator",
        "label": "requests validation from"
      }
    },
    {
      "data": {
        "id": "edge_5",
        "source": "CLI_User_Interface_",
        "target": "PDB_Snapshot_Validator",
        "label": "initiates checks on"
      }
    },
    {
      "data": {
        "id": "edge_6",
        "source": "CLI_User_Interface_",
        "target": "Error_Reporting_System",
        "label": "queries"
      }
    },
    {
      "data": {
        "id": "edge_7",
        "source": "Download_Tag_Validator",
        "target": "CLI_User_Interface_",
        "label": "provides validation to"
      }
    },
    {
      "data": {
        "id": "edge_8",
        "source": "PDB_Snapshot_Validator",
        "target": "CLI_User_Interface_",
        "label": "provides validation to"
      }
    },
    {
      "data": {
        "id": "edge_9",
        "source": "Error_Reporting_System",
        "target": "CLI_User_Interface_",
        "label": "provides error summaries to"
      }
    },
    {
      "data": {
        "id": "edge_10",
        "source": "PDB_Data_Model",
        "target": "SAbDab_Data_Model",
        "label": "is base class for"
      }
    },
    {
      "data": {
        "id": "edge_11",
        "source": "SAbDab_Data_Model",
        "target": "PDB_Data_Model",
        "label": "inherits from"
      }
    }
  ]
};
            
            try {
                const cy = cytoscape({
                    container: document.getElementById('cy'),
                    
                    elements: cytoscapeData.elements,
                    
                    style: [
                        {
                            selector: 'node',
                            style: {
                                'background-color': '#f8f9fa',
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'color': '#495057',
                                'text-wrap': 'wrap',
                                'font-size': '11px',
                                'font-weight': '500',
                                'width': 'label',
                                'height': 'label',
                                'padding': '15px',
                                'shape': 'roundrectangle',
                                'border-width': 2,
                                'border-color': '#dee2e6'
                            }
                        },
                        {
                            selector: 'node[hasLink = true]',
                            style: {
                                'background-color': '#e9ecef',
                                'border-color': '#6c757d',
                                'cursor': 'pointer',
                                'border-width': 3
                            }
                        },
                        {
                            selector: 'node:hover',
                            style: {
                                'background-color': '#dee2e6',
                                'border-color': '#495057',
                                'border-width': 3
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#adb5bd',
                                'target-arrow-color': '#adb5bd',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': '10px',
                                'color': '#6c757d',
                                'text-rotation': 'autorotate',
                                'text-margin-y': -10,
                                'text-background-color': '#ffffff',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '2px',
                                'text-background-shape': 'roundrectangle'
                            }
                        }
                    ],
                    
                    layout: {
                        name: 'dagre',
                        directed: true,
                        padding: 30,
                        rankDir: 'LR',
                        nodeSep: 80,
                        edgeSep: 20,
                        rankSep: 150
                    }
                });
                
                // Apply dagre layout after cytoscape is initialized
                cy.layout({
                    name: 'dagre',
                    directed: true,
                    padding: 30,
                    rankDir: 'LR',
                    nodeSep: 80,
                    edgeSep: 20,
                    rankSep: 150
                }).run();
                
                // Add click handler for nodes with links
                cy.on('tap', 'node[hasLink = true]', function(evt) {
                    const node = evt.target;
                    const linkUrl = node.data('linkUrl');
                    if (linkUrl) {
                        window.open(linkUrl, '_blank');
                    }
                });
                
                // Add simple tooltip on hover
                cy.on('mouseover', 'node', function(evt) {
                    const node = evt.target;
                    const description = node.data('description');
                    if (description) {
                        // Simple tooltip implementation
                        const tooltip = document.createElement('div');
                        tooltip.innerHTML = description;
                        tooltip.style.cssText = `
                            position: fixed;
                            background: #333;
                            color: white;
                            padding: 8px;
                            border-radius: 4px;
                            font-size: 12px;
                            max-width: 300px;
                            z-index: 1000;
                            pointer-events: none;
                        `;
                        document.body.appendChild(tooltip);
                        
                        const updateTooltip = (e) => {
                            tooltip.style.left = (e.clientX + 10) + 'px';
                            tooltip.style.top = (e.clientY + 10) + 'px';
                        };
                        
                        document.addEventListener('mousemove', updateTooltip);
                        
                        node.on('mouseout', () => {
                            document.removeEventListener('mousemove', updateTooltip);
                            if (tooltip.parentNode) {
                                tooltip.parentNode.removeChild(tooltip);
                            }
                        });
                    }
                });
                
                // Make control functions globally available
                window.resetLayout = function() {
                    cy.layout({
                        name: 'dagre',
                        directed: true,
                        padding: 30,
                        rankDir: 'LR',
                        nodeSep: 80,
                        edgeSep: 20,
                        rankSep: 150
                    }).run();
                };
                
                window.fitToView = function() {
                    cy.fit();
                };
                
                window.exportImage = function() {
                    const png64 = cy.png({ scale: 2, full: true });
                    const link = document.createElement('a');
                    link.download = 'diagram.png';
                    link.href = png64;
                    link.click();
                };
                
            } catch (error) {
                console.error('Error initializing Cytoscape:', error);
                document.getElementById('cy').innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Error loading diagram. Please refresh the page.</div>';
            }
        });
    </script>
</body>
</html>
